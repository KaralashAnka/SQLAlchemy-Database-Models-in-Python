# SQLAlchemy-Database-Models-in-Python
# –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–¥–∞–∂–∞–º–∏ –∫–Ω–∏–≥

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Å–∏—Å—Ç–µ–º—É –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–¥–∞–∂ –∫–Ω–∏–≥ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏–∑–¥–∞—Ç–µ–ª–µ–π –≤ —Ä–∞–∑–Ω—ã—Ö –º–∞–≥–∞–∑–∏–Ω–∞—Ö. –°–∏—Å—Ç–µ–º–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º SQLAlchemy ORM –∏ PostgreSQL.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–±:
- –ò–∑–¥–∞—Ç–µ–ª—è—Ö (–∞–≤—Ç–æ—Ä–∞—Ö) –∫–Ω–∏–≥
- –ö–Ω–∏–≥–∞—Ö –∏ –∏—Ö –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ –∫ –∏–∑–¥–∞—Ç–µ–ª—è–º
- –ú–∞–≥–∞–∑–∏–Ω–∞—Ö, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–æ–¥–∞—é—Ç—Å—è –∫–Ω–∏–≥–∏
- –°–∫–ª–∞–¥—Å–∫–∏—Ö –æ—Å—Ç–∞—Ç–∫–∞—Ö –∫–Ω–∏–≥ –≤ –º–∞–≥–∞–∑–∏–Ω–∞—Ö
- –§–∞–∫—Ç–∞—Ö –ø—Ä–æ–¥–∞–∂ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ü–µ–Ω—ã, –¥–∞—Ç—ã –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–°–∏—Å—Ç–µ–º–∞ –≤–∫–ª—é—á–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã:
- **Publisher** - –∏–∑–¥–∞—Ç–µ–ª–∏/–∞–≤—Ç–æ—Ä—ã
- **Book** - –∫–Ω–∏–≥–∏ —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ –∏–∑–¥–∞—Ç–µ–ª—è–º
- **Shop** - –º–∞–≥–∞–∑–∏–Ω—ã
- **Stock** - —Å–∫–ª–∞–¥—Å–∫–∏–µ –æ—Å—Ç–∞—Ç–∫–∏ –∫–Ω–∏–≥ –≤ –º–∞–≥–∞–∑–∏–Ω–∞—Ö
- **Sale** - —Ñ–∞–∫—Ç—ã –ø—Ä–æ–¥–∞–∂

### –°—Ö–µ–º–∞ —Å–≤—è–∑–µ–π:
```
Publisher (1) ‚Üê‚Üí (M) Book (1) ‚Üê‚Üí (M) Stock (M) ‚Üê‚Üí (1) Shop
                                    ‚Üì
                                  Sale
```

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
git clone <repository-url>
cd bookstore-management
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install sqlalchemy psycopg2-binary
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
export DB_HOST=localhost
export DB_PORT=5432
export DB_NAME=bookstore
export DB_USER=postgres
export DB_PASSWORD=–≤–∞—à_–ø–∞—Ä–æ–ª—å
```

–ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`:
```
DB_HOST=localhost
DB_PORT=5432
DB_NAME=bookstore
DB_USER=postgres
DB_PASSWORD=–≤–∞—à_–ø–∞—Ä–æ–ª—å
```

### 4. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
python setup_database.py
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
- –°–æ–∑–¥–∞—Å—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- –ó–∞–ø–æ–ª–Ω–∏—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –í—ã–≤–µ–¥–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
‚îú‚îÄ‚îÄ models.py                 # –ú–æ–¥–µ–ª–∏ SQLAlchemy
‚îú‚îÄ‚îÄ sqlalchemy_models.py      # –î—É–±–ª–∏—Ä—É—é—â–∏–π —Ñ–∞–π–ª –º–æ–¥–µ–ª–µ–π
‚îú‚îÄ‚îÄ setup_database.py         # –°–∫—Ä–∏–ø—Ç –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î
‚îú‚îÄ‚îÄ publisher_query_script.py # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø—Ä–æ–¥–∞–∂
‚îî‚îÄ‚îÄ README.md                 # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üîç –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü–æ–∏—Å–∫ –ø—Ä–æ–¥–∞–∂ –ø–æ –∏–∑–¥–∞—Ç–µ–ª—é

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç:
```bash
python publisher_query_script.py
```

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–ø—Ä–æ—Å–∏—Ç –∏–º—è –∏–ª–∏ ID –∏–∑–¥–∞—Ç–µ–ª—è –∏ –≤—ã–≤–µ–¥–µ—Ç –≤—Å–µ –ø—Ä–æ–¥–∞–∂–∏ –µ–≥–æ –∫–Ω–∏–≥:

**–ü—Ä–∏–º–µ—Ä –≤–≤–æ–¥–∞:** `–ü—É—à–∫–∏–Ω`

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
–ü—Ä–æ–¥–∞–∂–∏ –∫–Ω–∏–≥ –∏–∑–¥–∞—Ç–µ–ª—è: –ü—É—à–∫–∏–Ω
================================================================================
–ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏                 | –ú–∞–≥–∞–∑–∏–Ω         | –¶–µ–Ω–∞     | –î–∞—Ç–∞         | –ö–æ–ª-–≤–æ
--------------------------------------------------------------------------------
–ö–∞–ø–∏—Ç–∞–Ω—Å–∫–∞—è –¥–æ—á–∫–∞             | –ë—É–∫–≤–æ–µ–¥         | 600      | 09-11-2022   | 1
–†—É—Å–ª–∞–Ω –∏ –õ—é–¥–º–∏–ª–∞              | –ë—É–∫–≤–æ–µ–¥         | 500      | 08-11-2022   | 1
–ö–∞–ø–∏—Ç–∞–Ω—Å–∫–∞—è –¥–æ—á–∫–∞             | –õ–∞–±–∏—Ä–∏–Ω—Ç        | 580      | 05-11-2022   | 1
–ï–≤–≥–µ–Ω–∏–π –û–Ω–µ–≥–∏–Ω                | –ö–Ω–∏–∂–Ω—ã–π –¥–æ–º     | 490      | 02-11-2022   | 1
–ö–∞–ø–∏—Ç–∞–Ω—Å–∫–∞—è –¥–æ—á–∫–∞             | –ë—É–∫–≤–æ–µ–¥         | 600      | 26-10-2022   | 1
```

### –ü–æ–∏—Å–∫ –ø–æ ID –∏–∑–¥–∞—Ç–µ–ª—è

–í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –∏—Å–∫–∞—Ç—å –ø–æ ID –∏–∑–¥–∞—Ç–µ–ª—è:
```
–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏–ª–∏ ID –∏–∑–¥–∞—Ç–µ–ª—è: 1
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (models.py)

- **Publisher**: –ò–∑–¥–∞—Ç–µ–ª—å/–∞–≤—Ç–æ—Ä
  - `id` (Primary Key)
  - `name` (–ù–∞–∑–≤–∞–Ω–∏–µ/–ò–º—è)

- **Book**: –ö–Ω–∏–≥–∞
  - `id` (Primary Key)
  - `title` (–ù–∞–∑–≤–∞–Ω–∏–µ)
  - `id_publisher` (Foreign Key ‚Üí Publisher)

- **Shop**: –ú–∞–≥–∞–∑–∏–Ω
  - `id` (Primary Key)
  - `name` (–ù–∞–∑–≤–∞–Ω–∏–µ)

- **Stock**: –°–∫–ª–∞–¥—Å–∫–∏–µ –æ—Å—Ç–∞—Ç–∫–∏
  - `id` (Primary Key)
  - `id_book` (Foreign Key ‚Üí Book)
  - `id_shop` (Foreign Key ‚Üí Shop)
  - `count` (–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å–∫–ª–∞–¥–µ)

- **Sale**: –ü—Ä–æ–¥–∞–∂–∞
  - `id` (Primary Key)
  - `price` (–¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏)
  - `date_sale` (–î–∞—Ç–∞ –ø—Ä–æ–¥–∞–∂–∏)
  - `id_stock` (Foreign Key ‚Üí Stock)
  - `count` (–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–¥–∞–Ω–Ω—ã—Ö –∫–Ω–∏–≥)

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

1. **create_db_connection()** - –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
2. **find_publisher_sales()** - –ü–æ–∏—Å–∫ –ø—Ä–æ–¥–∞–∂ –ø–æ –∏–∑–¥–∞—Ç–µ–ª—é
3. **setup_database()** - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

## üß™ –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

–ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è:
- 4 –∏–∑–¥–∞—Ç–µ–ª—è: –ü—É—à–∫–∏–Ω, –¢–æ–ª—Å—Ç–æ–π, –î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π, –ß–µ—Ö–æ–≤
- 9 –∫–Ω–∏–≥ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∞–≤—Ç–æ—Ä–æ–≤
- 4 –º–∞–≥–∞–∑–∏–Ω–∞: –ë—É–∫–≤–æ–µ–¥, –õ–∞–±–∏—Ä–∏–Ω—Ç, –ö–Ω–∏–∂–Ω—ã–π –¥–æ–º, –ß–∏—Ç–∞–π-–≥–æ—Ä–æ–¥
- –°–∫–ª–∞–¥—Å–∫–∏–µ –∑–∞–ø–∏—Å–∏ –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –∫–Ω–∏–≥–∞-–º–∞–≥–∞–∑–∏–Ω
- 8 —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø—Ä–æ–¥–∞–∂

## ‚öôÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.7+
- SQLAlchemy 1.4+
- PostgreSQL 10+
- psycopg2-binary

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ì–∏–±–∫–∏–π –ø–æ–∏—Å–∫
- –ü–æ–∏—Å–∫ –ø–æ —Ç–æ—á–Ω–æ–º—É —Å–æ–≤–ø–∞–¥–µ–Ω–∏—é –∏–º–µ–Ω–∏ –∏–∑–¥–∞—Ç–µ–ª—è
- –ü–æ–∏—Å–∫ –ø–æ —á–∞—Å—Ç–∏—á–Ω–æ–º—É —Å–æ–≤–ø–∞–¥–µ–Ω–∏—é (—Ä–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π)
- –ü–æ–∏—Å–∫ –ø–æ ID –∏–∑–¥–∞—Ç–µ–ª—è

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
- –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–≤–æ–¥–∞
- –¢–∞–±–ª–∏—á–Ω—ã–π –≤—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ –ø—Ä–æ–¥–∞–∂–∏ (–Ω–æ–≤—ã–µ –ø–µ—Ä–≤—ã–µ)
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã –≤ —É–¥–æ–±–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. –ü–∞—Ä–æ–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ –∫–æ–¥–µ —É–∫–∞–∑–∞–Ω –∫–∞–∫ –ø—Ä–∏–º–µ—Ä (`anolanda`). –í production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.
2. –§–∞–π–ª—ã `models.py` –∏ `sqlalchemy_models.py` —Å–æ–¥–µ—Ä–∂–∞—Ç –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–µ –º–æ–¥–µ–ª–∏ - –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±–æ–π –∏–∑ –Ω–∏—Ö.
3. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ `setup_database.py` –ø—Ä–æ–≤–µ—Ä–∏—Ç –Ω–∞–ª–∏—á–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ –Ω–µ –±—É–¥–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø–∏—Å–∏.

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–ü—Ä–∏ –≤–Ω–µ—Å–µ–Ω–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
1. –í—Å–µ –º–æ–¥–µ–ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–≤—è–∑–∞–Ω—ã
2. –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—à–∏–±–æ–∫
3. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –≤ —Ä–∞–º–∫–∞—Ö –¥–æ–º–∞—à–Ω–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è –∫ –ª–µ–∫—Ü–∏–∏ ¬´Python –∏ –ë–î. ORM¬ª.
